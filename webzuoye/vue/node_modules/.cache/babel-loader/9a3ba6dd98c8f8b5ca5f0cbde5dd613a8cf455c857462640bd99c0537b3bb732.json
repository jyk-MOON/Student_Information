{"ast":null,"code":"import bookApi from '@/api/book';\nexport default {\n  name: \"StudentBorrowQuery\",\n  data() {\n    return {\n      // 搜索相关\n      searchInput: '',\n      searchType: 'studentId',\n      activeCollapse: [],\n      advancedSearch: {\n        college: '',\n        major: '',\n        className: ''\n      },\n      // 当前学生信息\n      currentStudent: {},\n      // 借阅统计\n      borrowStats: {\n        totalBorrowed: 0,\n        currentBorrowing: 0,\n        overdue: 0,\n        favorites: 0\n      },\n      // 当前借阅列表\n      currentBorrowList: [],\n      loadingCurrent: false,\n      selectedCurrentBorrows: [],\n      // 历史借阅记录\n      historyBorrowList: [],\n      loadingHistory: false,\n      historyPageNum: 1,\n      historyPageSize: 10,\n      historyTotal: 0,\n      // 学生列表对话框\n      studentListVisible: false,\n      studentListSearch: '',\n      studentList: [],\n      // 当前登录管理员信息\n      currentAdmin: JSON.parse(localStorage.getItem('xm-user') || '{}')\n    };\n  },\n  computed: {\n    // 过滤后的学生列表\n    filteredStudentList() {\n      if (!this.studentListSearch) return this.studentList;\n      const search = this.studentListSearch.toLowerCase();\n      return this.studentList.filter(student => student.studentId && student.studentId.toLowerCase().includes(search) || student.name && student.name.toLowerCase().includes(search) || student.phone && student.phone.includes(search) || student.college && student.college.toLowerCase().includes(search));\n    }\n  },\n  methods: {\n    // 搜索学生\n    handleSearch() {\n      if (!this.searchInput.trim()) {\n        this.$message.warning('请输入搜索内容');\n        return;\n      }\n\n      // 这里需要调用学生查询接口\n      // 假设有一个查询学生的接口\n      this.$request.get('/user/search', {\n        params: {\n          [this.searchType]: this.searchInput,\n          role: 'STUDENT' // 假设角色为STUDENT\n        }\n      }).then(res => {\n        if (res.code === '200' && res.data) {\n          if (Array.isArray(res.data) && res.data.length > 0) {\n            // 如果有多个结果，显示选择对话框\n            if (res.data.length > 1) {\n              this.studentList = res.data;\n              this.studentListVisible = true;\n            } else {\n              // 只有一个结果，直接选择\n              this.selectStudent(res.data[0]);\n            }\n          } else if (!Array.isArray(res.data) && res.data.id) {\n            // 单个学生对象\n            this.selectStudent(res.data);\n          } else {\n            this.$message.warning('未找到匹配的学生');\n          }\n        } else {\n          this.$message.warning(res.msg || '未找到学生');\n        }\n      }).catch(err => {\n        console.error('搜索学生出错:', err);\n        this.$message.error('搜索失败');\n      });\n    },\n    // 高级搜索\n    handleAdvancedSearch() {\n      // 实现高级搜索逻辑\n      this.$message.info('高级搜索功能开发中...');\n    },\n    // 切换搜索类型\n    handleSearchTypeChange() {\n      this.searchInput = '';\n      this.$message.info(`已切换为按${this.searchType === 'studentId' ? '学号' : this.searchType === 'name' ? '姓名' : '手机号'}搜索`);\n    },\n    // 显示学生列表\n    showStudentList() {\n      // 加载所有学生\n      this.$request.get('/user/selectPage', {\n        params: {\n          pageNum: 1,\n          pageSize: 100,\n          role: 'STUDENT'\n        }\n      }).then(res => {\n        if (res.code === '200' && res.data?.list) {\n          this.studentList = res.data.list;\n          this.studentListVisible = true;\n        } else {\n          this.$message.warning('获取学生列表失败');\n        }\n      });\n    },\n    // 重置搜索\n    resetSearch() {\n      this.searchInput = '';\n      this.currentStudent = {};\n      this.currentBorrowList = [];\n      this.historyBorrowList = [];\n      this.borrowStats = {\n        totalBorrowed: 0,\n        currentBorrowing: 0,\n        overdue: 0,\n        favorites: 0\n      };\n    },\n    // 选择学生\n    selectStudent(student) {\n      this.currentStudent = student;\n      this.studentListVisible = false;\n\n      // 加载该学生的借阅数据\n      this.loadBorrowData();\n    },\n    // 加载借阅数据\n    loadBorrowData() {\n      if (!this.currentStudent.id) {\n        this.$message.warning('请先选择学生');\n        return;\n      }\n      this.loadCurrentBorrows();\n      this.loadHistoryBorrows();\n      this.calculateBorrowStats();\n    },\n    // 加载当前借阅\n    async loadCurrentBorrows() {\n      this.loadingCurrent = true;\n      try {\n        const res = await this.$request.get(`/book/borrow/user/${this.currentStudent.id}`);\n        if (res.code === '200') {\n          // 过滤出未归还的记录\n          this.currentBorrowList = (res.data || []).filter(record => !record.returnTime);\n          this.selectedCurrentBorrows = [];\n        } else {\n          this.$message.error(res.msg || '获取当前借阅失败');\n        }\n      } catch (error) {\n        console.error('获取当前借阅出错:', error);\n        this.$message.error('获取当前借阅失败');\n      } finally {\n        this.loadingCurrent = false;\n      }\n    },\n    // 加载历史借阅记录\n    loadHistoryBorrows() {\n      this.loadingHistory = true;\n\n      // 调用分页查询接口\n      bookApi.selectBorrowPage({\n        pageNum: this.historyPageNum,\n        pageSize: this.historyPageSize,\n        userId: this.currentStudent.id\n      }).then(res => {\n        this.loadingHistory = false;\n        if (res.code === '200') {\n          this.historyBorrowList = res.data?.list || [];\n          this.historyTotal = res.data?.total || 0;\n        } else {\n          this.$message.error(res.msg || '获取历史记录失败');\n        }\n      }).catch(err => {\n        this.loadingHistory = false;\n        console.error('获取历史记录出错:', err);\n      });\n    },\n    // 计算借阅统计\n    calculateBorrowStats() {\n      // 这里可以根据实际数据计算统计信息\n      this.borrowStats = {\n        totalBorrowed: this.historyTotal,\n        currentBorrowing: this.currentBorrowList.length,\n        overdue: this.currentBorrowList.filter(record => this.isOverdue(record)).length,\n        favorites: 0 // 需要额外的收藏接口\n      };\n    },\n\n    // 当前借阅多选\n    handleCurrentBorrowSelection(selection) {\n      this.selectedCurrentBorrows = selection;\n    },\n    // 单本归还\n    handleSingleReturn(record) {\n      this.$confirm(`确认归还图书《${record.bookName}》吗？`, '办理归还', {\n        confirmButtonText: '确认归还',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        const adminId = this.currentAdmin.id;\n        if (!adminId) {\n          this.$message.error('无法获取管理员信息');\n          return;\n        }\n        bookApi.returnBook(record.id, adminId).then(res => {\n          if (res.code === '200') {\n            this.$message.success('归还成功');\n            this.loadBorrowData(); // 重新加载数据\n          } else {\n            this.$message.error(res.msg || '归还失败');\n          }\n        });\n      }).catch(() => {});\n    },\n    // 批量归还\n    handleBatchReturn() {\n      if (this.selectedCurrentBorrows.length === 0) {\n        this.$message.warning('请选择要归还的图书');\n        return;\n      }\n      const bookNames = this.selectedCurrentBorrows.map(item => item.bookName).join('、');\n      this.$confirm(`确认批量归还 ${this.selectedCurrentBorrows.length} 本图书吗？\\n\\n${bookNames}`, '批量归还', {\n        confirmButtonText: '确认归还',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        const adminId = this.currentAdmin.id;\n        if (!adminId) {\n          this.$message.error('无法获取管理员信息');\n          return;\n        }\n\n        // 批量处理\n        let successCount = 0;\n        const processNext = index => {\n          if (index >= this.selectedCurrentBorrows.length) {\n            this.$message.success(`成功归还 ${successCount} 本图书`);\n            this.loadBorrowData();\n            return;\n          }\n          const record = this.selectedCurrentBorrows[index];\n          bookApi.returnBook(record.id, adminId).then(res => {\n            if (res.code === '200') successCount++;\n            processNext(index + 1);\n          }).catch(() => {\n            processNext(index + 1);\n          });\n        };\n        processNext(0);\n      }).catch(() => {});\n    },\n    // 续借\n    handleRenew(record) {\n      this.$confirm(`确认续借图书《${record.bookName}》吗？`, '办理续借', {\n        confirmButtonText: '确认续借',\n        cancelButtonText: '取消',\n        type: 'info'\n      }).then(() => {\n        // 这里需要调用续借接口，假设为/book/renew/{borrowId}\n        this.$request.post(`/book/renew/${record.id}`).then(res => {\n          if (res.code === '200') {\n            this.$message.success('续借成功');\n            record.renewed = true;\n            // 更新应还时间\n            if (res.data && res.data.newDueTime) {\n              record.dueTime = res.data.newDueTime;\n            }\n          } else {\n            this.$message.error(res.msg || '续借失败');\n          }\n        });\n      }).catch(() => {});\n    },\n    // 导出历史记录\n    exportHistory() {\n      this.$message.info('导出功能开发中...');\n      // 实际开发中可以调用导出接口\n    },\n\n    // 查看学生详情\n    viewStudentDetail() {\n      // 跳转到学生详情页面或显示详情对话框\n      this.$message.info('查看学生详情功能开发中...');\n    },\n    // 查看图书详情\n    viewBookDetail(bookId) {\n      // 跳转到图书详情页面\n      this.$message.info(`查看图书详情: ${bookId}`);\n    },\n    // 查看借阅记录详情\n    viewBorrowDetail(record) {\n      // 显示借阅记录详情\n      this.$alert(`借阅记录详情：\\n\\n` + `图书：${record.bookName}\\n` + `作者：${record.bookAuthor}\\n` + `ISBN：${record.bookIsbn}\\n` + `借阅时间：${this.formatDate(record.borrowTime)}\\n` + `应还时间：${this.formatDate(record.dueTime)}\\n` + `归还时间：${this.formatDate(record.returnTime) || '尚未归还'}\\n` + `操作员：${record.adminName || '系统'}`, '借阅详情', {\n        confirmButtonText: '知道了'\n      });\n    },\n    // 学生列表行点击\n    handleStudentSelect(row) {\n      this.selectStudent(row);\n    },\n    // 历史记录分页切换\n    handleHistoryPageChange(pageNum) {\n      this.historyPageNum = pageNum;\n      this.loadHistoryBorrows();\n    },\n    // 历史记录每页条数切换\n    handleHistorySizeChange(pageSize) {\n      this.historyPageSize = pageSize;\n      this.historyPageNum = 1;\n      this.loadHistoryBorrows();\n    },\n    // 工具方法：格式化日期\n    formatDate(dateStr) {\n      if (!dateStr) return '--';\n      try {\n        const date = new Date(dateStr);\n        return date.toLocaleDateString('zh-CN', {\n          year: 'numeric',\n          month: '2-digit',\n          day: '2-digit'\n        }).replace(/\\//g, '-');\n      } catch (e) {\n        return dateStr;\n      }\n    },\n    // 判断是否超期\n    isOverdue(record) {\n      if (!record.dueTime) return false;\n      const dueDate = new Date(record.dueTime);\n      const now = new Date();\n      return now > dueDate;\n    },\n    // 计算超期天数\n    calculateOverdueDays(record) {\n      if (!this.isOverdue(record)) return 0;\n      const dueDate = new Date(record.dueTime);\n      const now = new Date();\n      const diffTime = now - dueDate;\n      return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    },\n    // 计算剩余天数\n    calculateRemainingDays(record) {\n      if (!record.dueTime || this.isOverdue(record)) return 0;\n      const dueDate = new Date(record.dueTime);\n      const now = new Date();\n      const diffTime = dueDate - now;\n      return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    },\n    // 获取剩余天数标签类型\n    getRemainingDaysTagType(record) {\n      const days = this.calculateRemainingDays(record);\n      if (days <= 0) return 'danger';\n      if (days <= 3) return 'warning';\n      return 'success';\n    },\n    // 计算借阅时长\n    calculateBorrowDuration(record) {\n      if (!record.borrowTime) return '--';\n      const borrowDate = new Date(record.borrowTime);\n      const returnDate = record.returnTime ? new Date(record.returnTime) : new Date();\n      const diffTime = returnDate - borrowDate;\n      const days = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n      return days > 0 ? `${days}天` : '当天归还';\n    }\n  }\n};","map":{"version":3,"names":["bookApi","name","data","searchInput","searchType","activeCollapse","advancedSearch","college","major","className","currentStudent","borrowStats","totalBorrowed","currentBorrowing","overdue","favorites","currentBorrowList","loadingCurrent","selectedCurrentBorrows","historyBorrowList","loadingHistory","historyPageNum","historyPageSize","historyTotal","studentListVisible","studentListSearch","studentList","currentAdmin","JSON","parse","localStorage","getItem","computed","filteredStudentList","search","toLowerCase","filter","student","studentId","includes","phone","methods","handleSearch","trim","$message","warning","$request","get","params","role","then","res","code","Array","isArray","length","selectStudent","id","msg","catch","err","console","error","handleAdvancedSearch","info","handleSearchTypeChange","showStudentList","pageNum","pageSize","list","resetSearch","loadBorrowData","loadCurrentBorrows","loadHistoryBorrows","calculateBorrowStats","record","returnTime","selectBorrowPage","userId","total","isOverdue","handleCurrentBorrowSelection","selection","handleSingleReturn","$confirm","bookName","confirmButtonText","cancelButtonText","type","adminId","returnBook","success","handleBatchReturn","bookNames","map","item","join","successCount","processNext","index","handleRenew","post","renewed","newDueTime","dueTime","exportHistory","viewStudentDetail","viewBookDetail","bookId","viewBorrowDetail","$alert","bookAuthor","bookIsbn","formatDate","borrowTime","adminName","handleStudentSelect","row","handleHistoryPageChange","handleHistorySizeChange","dateStr","date","Date","toLocaleDateString","year","month","day","replace","e","dueDate","now","calculateOverdueDays","diffTime","Math","ceil","calculateRemainingDays","getRemainingDaysTagType","days","calculateBorrowDuration","borrowDate","returnDate","floor"],"sources":["src/views/manager/StudentBorrowQuery.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- 1. 学生搜索区 -->\r\n    <el-card shadow=\"hover\" style=\"margin-bottom: 20px;\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span style=\"font-weight: bold; color: #409EFF;\">\r\n          <i class=\"el-icon-search\"></i> 学生查询\r\n        </span>\r\n      </div>\r\n\r\n      <div class=\"search-container\">\r\n        <div style=\"display: flex; align-items: center; gap: 15px;\">\r\n          <div style=\"flex: 1;\">\r\n            <el-input\r\n                v-model=\"searchInput\"\r\n                placeholder=\"请输入学生学号、姓名或手机号进行查询\"\r\n                style=\"width: 100%\"\r\n                @keyup.enter.native=\"handleSearch\"\r\n                clearable>\r\n              <el-select\r\n                  v-model=\"searchType\"\r\n                  slot=\"prepend\"\r\n                  style=\"width: 100px\"\r\n                  @change=\"handleSearchTypeChange\">\r\n                <el-option label=\"学号\" value=\"studentId\"></el-option>\r\n                <el-option label=\"姓名\" value=\"name\"></el-option>\r\n                <el-option label=\"手机号\" value=\"phone\"></el-option>\r\n              </el-select>\r\n              <el-button\r\n                  slot=\"append\"\r\n                  icon=\"el-icon-search\"\r\n                  type=\"primary\"\r\n                  @click=\"handleSearch\">\r\n              </el-button>\r\n            </el-input>\r\n          </div>\r\n\r\n          <div>\r\n            <el-button type=\"info\" plain @click=\"showStudentList\">\r\n              <i class=\"el-icon-user\"></i> 学生列表\r\n            </el-button>\r\n            <el-button type=\"warning\" plain @click=\"resetSearch\">\r\n              <i class=\"el-icon-refresh\"></i> 重置\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 高级搜索（折叠面板） -->\r\n        <el-collapse v-model=\"activeCollapse\" style=\"margin-top: 15px;\">\r\n          <el-collapse-item title=\"高级搜索\" name=\"1\">\r\n            <el-form :inline=\"true\" label-width=\"80px\">\r\n              <el-form-item label=\"学院\">\r\n                <el-input v-model=\"advancedSearch.college\" placeholder=\"请输入学院名称\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"专业\">\r\n                <el-input v-model=\"advancedSearch.major\" placeholder=\"请输入专业名称\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"班级\">\r\n                <el-input v-model=\"advancedSearch.className\" placeholder=\"请输入班级\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item>\r\n                <el-button type=\"primary\" @click=\"handleAdvancedSearch\">搜索</el-button>\r\n              </el-form-item>\r\n            </el-form>\r\n          </el-collapse-item>\r\n        </el-collapse>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 2. 学生信息展示区 -->\r\n    <el-card v-if=\"currentStudent.id\" shadow=\"hover\" style=\"margin-bottom: 20px;\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span style=\"font-weight: bold; color: #67C23A;\">\r\n          <i class=\"el-icon-user-solid\"></i> 学生信息\r\n        </span>\r\n        <el-button\r\n            style=\"float: right; padding: 3px 0\"\r\n            type=\"text\"\r\n            @click=\"viewStudentDetail\">\r\n          查看详情 <i class=\"el-icon-arrow-right\"></i>\r\n        </el-button>\r\n      </div>\r\n\r\n      <div class=\"student-info\">\r\n        <div style=\"display: flex; align-items: center; margin-bottom: 15px;\">\r\n          <div style=\"width: 80px; height: 80px; background-color: #f0f9ff; border-radius: 50%;\r\n                     display: flex; align-items: center; justify-content: center; margin-right: 20px;\">\r\n            <i class=\"el-icon-user\" style=\"font-size: 40px; color: #409EFF;\"></i>\r\n          </div>\r\n\r\n          <div style=\"flex: 1;\">\r\n            <div style=\"display: flex; flex-wrap: wrap; gap: 30px;\">\r\n              <div class=\"info-item\">\r\n                <div class=\"info-label\">学号</div>\r\n                <div class=\"info-value\">{{ currentStudent.studentId || currentStudent.id }}</div>\r\n              </div>\r\n              <div class=\"info-item\">\r\n                <div class=\"info-label\">姓名</div>\r\n                <div class=\"info-value\">{{ currentStudent.name }}</div>\r\n              </div>\r\n              <div class=\"info-item\">\r\n                <div class=\"info-label\">性别</div>\r\n                <div class=\"info-value\">{{ currentStudent.gender || '未填写' }}</div>\r\n              </div>\r\n              <div class=\"info-item\">\r\n                <div class=\"info-label\">学院</div>\r\n                <div class=\"info-value\">{{ currentStudent.college || '未填写' }}</div>\r\n              </div>\r\n              <div class=\"info-item\">\r\n                <div class=\"info-label\">专业</div>\r\n                <div class=\"info-value\">{{ currentStudent.major || '未填写' }}</div>\r\n              </div>\r\n              <div class=\"info-item\">\r\n                <div class=\"info-label\">班级</div>\r\n                <div class=\"info-value\">{{ currentStudent.className || '未填写' }}</div>\r\n              </div>\r\n              <div class=\"info-item\">\r\n                <div class=\"info-label\">联系方式</div>\r\n                <div class=\"info-value\">{{ currentStudent.phone || '未填写' }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 借阅统计卡片 -->\r\n        <div style=\"display: flex; gap: 15px; margin-top: 10px;\">\r\n          <el-card shadow=\"never\" style=\"flex: 1; text-align: center; background-color: #f0f9ff;\">\r\n            <div style=\"color: #409EFF; font-size: 24px; font-weight: bold;\">\r\n              {{ borrowStats.totalBorrowed || 0 }}\r\n            </div>\r\n            <div style=\"color: #606266; font-size: 14px; margin-top: 5px;\">总借阅量</div>\r\n          </el-card>\r\n          <el-card shadow=\"never\" style=\"flex: 1; text-align: center; background-color: #f0f9ff;\">\r\n            <div style=\"color: #E6A23C; font-size: 24px; font-weight: bold;\">\r\n              {{ borrowStats.currentBorrowing || 0 }}\r\n            </div>\r\n            <div style=\"color: #606266; font-size: 14px; margin-top: 5px;\">当前借阅</div>\r\n          </el-card>\r\n          <el-card shadow=\"never\" style=\"flex: 1; text-align: center; background-color: #f0f9ff;\">\r\n            <div :style=\"{color: borrowStats.overdue > 0 ? '#F56C6C' : '#67C23A',\r\n                         fontSize: '24px', fontWeight: 'bold'}\">\r\n              {{ borrowStats.overdue || 0 }}\r\n            </div>\r\n            <div style=\"color: #606266; font-size: 14px; margin-top: 5px;\">超期未还</div>\r\n          </el-card>\r\n          <el-card shadow=\"never\" style=\"flex: 1; text-align: center; background-color: #f0f9ff;\">\r\n            <div style=\"color: #909399; font-size: 24px; font-weight: bold;\">\r\n              {{ borrowStats.favorites || 0 }}\r\n            </div>\r\n            <div style=\"color: #606266; font-size: 14px; margin-top: 5px;\">收藏图书</div>\r\n          </el-card>\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 3. 当前借阅列表 -->\r\n    <el-card v-if=\"currentStudent.id\" shadow=\"hover\" style=\"margin-bottom: 20px;\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span style=\"font-weight: bold; color: #E6A23C;\">\r\n          <i class=\"el-icon-reading\"></i> 当前借阅 ({{ currentBorrowList.length }})\r\n        </span>\r\n        <div style=\"float: right;\">\r\n          <el-button\r\n              type=\"success\"\r\n              size=\"mini\"\r\n              plain\r\n              :disabled=\"selectedCurrentBorrows.length === 0\"\r\n              @click=\"handleBatchReturn\">\r\n            批量归还 ({{ selectedCurrentBorrows.length }})\r\n          </el-button>\r\n          <el-button\r\n              type=\"primary\"\r\n              size=\"mini\"\r\n              plain\r\n              @click=\"loadBorrowData\">\r\n            <i class=\"el-icon-refresh\"></i> 刷新\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-if=\"currentBorrowList.length > 0\">\r\n        <el-table\r\n            :data=\"currentBorrowList\"\r\n            stripe\r\n            @selection-change=\"handleCurrentBorrowSelection\"\r\n            v-loading=\"loadingCurrent\">\r\n\r\n          <el-table-column type=\"selection\" width=\"55\" align=\"center\"></el-table-column>\r\n\r\n          <el-table-column label=\"图书信息\" min-width=\"200\">\r\n            <template v-slot=\"scope\">\r\n              <div>\r\n                <div style=\"font-weight: 500; color: #409EFF; cursor: pointer;\"\r\n                     @click=\"viewBookDetail(scope.row.bookId)\">\r\n                  {{ scope.row.bookName }}\r\n                </div>\r\n                <div style=\"font-size: 12px; color: #909399; margin-top: 2px;\">\r\n                  {{ scope.row.bookAuthor }} | ISBN: {{ scope.row.bookIsbn }}\r\n                </div>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"借阅时间\" width=\"150\" align=\"center\">\r\n            <template v-slot=\"scope\">\r\n              {{ formatDate(scope.row.borrowTime) }}\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"应还时间\" width=\"150\" align=\"center\">\r\n            <template v-slot=\"scope\">\r\n              <div :style=\"{color: isOverdue(scope.row) ? '#F56C6C' : '#67C23A'}\">\r\n                {{ formatDate(scope.row.dueTime) }}\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"剩余天数\" width=\"100\" align=\"center\">\r\n            <template v-slot=\"scope\">\r\n              <el-tag\r\n                  :type=\"getRemainingDaysTagType(scope.row)\"\r\n                  size=\"small\"\r\n                  effect=\"plain\">\r\n                {{ calculateRemainingDays(scope.row) }}天\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"超期状态\" width=\"100\" align=\"center\">\r\n            <template v-slot=\"scope\">\r\n              <el-tag\r\n                  v-if=\"isOverdue(scope.row)\"\r\n                  type=\"danger\"\r\n                  size=\"small\"\r\n                  effect=\"dark\">\r\n                超期 {{ calculateOverdueDays(scope.row) }}天\r\n              </el-tag>\r\n              <el-tag\r\n                  v-else\r\n                  type=\"success\"\r\n                  size=\"small\"\r\n                  effect=\"plain\">\r\n                正常\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"操作\" width=\"150\" align=\"center\" fixed=\"right\">\r\n            <template v-slot=\"scope\">\r\n              <el-button\r\n                  type=\"success\"\r\n                  size=\"mini\"\r\n                  @click=\"handleSingleReturn(scope.row)\">\r\n                归还\r\n              </el-button>\r\n              <el-button\r\n                  type=\"warning\"\r\n                  size=\"mini\"\r\n                  plain\r\n                  @click=\"handleRenew(scope.row)\"\r\n                  :disabled=\"scope.row.renewed || isOverdue(scope.row)\">\r\n                续借\r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n\r\n      <div v-else style=\"text-align: center; padding: 40px; color: #909399;\">\r\n        <i class=\"el-icon-notebook-2\" style=\"font-size: 60px; margin-bottom: 15px;\"></i>\r\n        <div style=\"font-size: 16px;\">该学生当前没有借阅中的图书</div>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 4. 历史借阅记录 -->\r\n    <el-card v-if=\"currentStudent.id\" shadow=\"hover\">\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span style=\"font-weight: bold; color: #909399;\">\r\n          <i class=\"el-icon-timer\"></i> 历史借阅记录\r\n        </span>\r\n        <div style=\"float: right;\">\r\n          <el-button\r\n              type=\"info\"\r\n              size=\"mini\"\r\n              plain\r\n              @click=\"exportHistory\">\r\n            <i class=\"el-icon-download\"></i> 导出记录\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-if=\"historyBorrowList.length > 0\">\r\n        <el-table\r\n            :data=\"historyBorrowList\"\r\n            stripe\r\n            v-loading=\"loadingHistory\">\r\n\r\n          <el-table-column label=\"图书信息\" min-width=\"200\">\r\n            <template v-slot=\"scope\">\r\n              <div>\r\n                <div style=\"font-weight: 500;\">{{ scope.row.bookName }}</div>\r\n                <div style=\"font-size: 12px; color: #909399; margin-top: 2px;\">\r\n                  {{ scope.row.bookAuthor }} | ISBN: {{ scope.row.bookIsbn }}\r\n                </div>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"借阅时间\" width=\"150\" align=\"center\">\r\n            <template v-slot=\"scope\">\r\n              {{ formatDate(scope.row.borrowTime) }}\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"归还时间\" width=\"150\" align=\"center\">\r\n            <template v-slot=\"scope\">\r\n              {{ formatDate(scope.row.returnTime) || '--' }}\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"借阅状态\" width=\"100\" align=\"center\">\r\n            <template v-slot=\"scope\">\r\n              <el-tag\r\n                  :type=\"scope.row.returnTime ? 'success' : 'warning'\"\r\n                  size=\"small\">\r\n                {{ scope.row.returnTime ? '已归还' : '借阅中' }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"借阅时长\" width=\"120\" align=\"center\">\r\n            <template v-slot=\"scope\">\r\n              {{ calculateBorrowDuration(scope.row) }}\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"操作管理员\" width=\"120\">\r\n            <template v-slot=\"scope\">\r\n              {{ scope.row.adminName || '系统' }}\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"操作\" width=\"100\" align=\"center\">\r\n            <template v-slot=\"scope\">\r\n              <el-button\r\n                  type=\"text\"\r\n                  size=\"mini\"\r\n                  @click=\"viewBorrowDetail(scope.row)\">\r\n                详情\r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n        <!-- 历史记录分页 -->\r\n        <div style=\"margin-top: 15px; text-align: center;\">\r\n          <el-pagination\r\n              background\r\n              @current-change=\"handleHistoryPageChange\"\r\n              @size-change=\"handleHistorySizeChange\"\r\n              :current-page=\"historyPageNum\"\r\n              :page-sizes=\"[10, 20, 50]\"\r\n              :page-size=\"historyPageSize\"\r\n              layout=\"total, sizes, prev, pager, next\"\r\n              :total=\"historyTotal\">\r\n          </el-pagination>\r\n        </div>\r\n      </div>\r\n\r\n      <div v-else style=\"text-align: center; padding: 40px; color: #909399;\">\r\n        <i class=\"el-icon-document\" style=\"font-size: 60px; margin-bottom: 15px;\"></i>\r\n        <div style=\"font-size: 16px;\">暂无历史借阅记录</div>\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 5. 学生选择对话框 -->\r\n    <el-dialog\r\n        title=\"选择学生\"\r\n        :visible.sync=\"studentListVisible\"\r\n        width=\"70%\"\r\n        :close-on-click-modal=\"false\">\r\n\r\n      <div style=\"margin-bottom: 15px;\">\r\n        <el-input\r\n            v-model=\"studentListSearch\"\r\n            placeholder=\"搜索学生\"\r\n            style=\"width: 300px\"\r\n            clearable>\r\n          <el-button slot=\"append\" icon=\"el-icon-search\"></el-button>\r\n        </el-input>\r\n      </div>\r\n\r\n      <el-table\r\n          :data=\"filteredStudentList\"\r\n          stripe\r\n          @row-click=\"handleStudentSelect\"\r\n          height=\"400\">\r\n\r\n        <el-table-column prop=\"studentId\" label=\"学号\" width=\"120\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"name\" label=\"姓名\" width=\"100\" align=\"center\"></el-table-column>\r\n        <el-table-column prop=\"gender\" label=\"性别\" width=\"80\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            {{ scope.row.gender === 'M' ? '男' : scope.row.gender === 'F' ? '女' : '未填写' }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"college\" label=\"学院\"></el-table-column>\r\n        <el-table-column prop=\"major\" label=\"专业\"></el-table-column>\r\n        <el-table-column prop=\"className\" label=\"班级\" width=\"100\"></el-table-column>\r\n        <el-table-column prop=\"phone\" label=\"联系方式\" width=\"120\"></el-table-column>\r\n        <el-table-column label=\"操作\" width=\"80\" align=\"center\">\r\n          <template v-slot=\"scope\">\r\n            <el-button type=\"text\" size=\"mini\" @click.stop=\"selectStudent(scope.row)\">选择</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"studentListVisible = false\">取消</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport bookApi from '@/api/book'\r\n\r\nexport default {\r\n  name: \"StudentBorrowQuery\",\r\n  data() {\r\n    return {\r\n      // 搜索相关\r\n      searchInput: '',\r\n      searchType: 'studentId',\r\n      activeCollapse: [],\r\n      advancedSearch: {\r\n        college: '',\r\n        major: '',\r\n        className: ''\r\n      },\r\n\r\n      // 当前学生信息\r\n      currentStudent: {},\r\n\r\n      // 借阅统计\r\n      borrowStats: {\r\n        totalBorrowed: 0,\r\n        currentBorrowing: 0,\r\n        overdue: 0,\r\n        favorites: 0\r\n      },\r\n\r\n      // 当前借阅列表\r\n      currentBorrowList: [],\r\n      loadingCurrent: false,\r\n      selectedCurrentBorrows: [],\r\n\r\n      // 历史借阅记录\r\n      historyBorrowList: [],\r\n      loadingHistory: false,\r\n      historyPageNum: 1,\r\n      historyPageSize: 10,\r\n      historyTotal: 0,\r\n\r\n      // 学生列表对话框\r\n      studentListVisible: false,\r\n      studentListSearch: '',\r\n      studentList: [],\r\n\r\n      // 当前登录管理员信息\r\n      currentAdmin: JSON.parse(localStorage.getItem('xm-user') || '{}')\r\n    }\r\n  },\r\n  computed: {\r\n    // 过滤后的学生列表\r\n    filteredStudentList() {\r\n      if (!this.studentListSearch) return this.studentList\r\n\r\n      const search = this.studentListSearch.toLowerCase()\r\n      return this.studentList.filter(student =>\r\n          (student.studentId && student.studentId.toLowerCase().includes(search)) ||\r\n          (student.name && student.name.toLowerCase().includes(search)) ||\r\n          (student.phone && student.phone.includes(search)) ||\r\n          (student.college && student.college.toLowerCase().includes(search))\r\n      )\r\n    }\r\n  },\r\n  methods: {\r\n    // 搜索学生\r\n    handleSearch() {\r\n      if (!this.searchInput.trim()) {\r\n        this.$message.warning('请输入搜索内容')\r\n        return\r\n      }\r\n\r\n      // 这里需要调用学生查询接口\r\n      // 假设有一个查询学生的接口\r\n      this.$request.get('/user/search', {\r\n        params: {\r\n          [this.searchType]: this.searchInput,\r\n          role: 'STUDENT' // 假设角色为STUDENT\r\n        }\r\n      }).then(res => {\r\n        if (res.code === '200' && res.data) {\r\n          if (Array.isArray(res.data) && res.data.length > 0) {\r\n            // 如果有多个结果，显示选择对话框\r\n            if (res.data.length > 1) {\r\n              this.studentList = res.data\r\n              this.studentListVisible = true\r\n            } else {\r\n              // 只有一个结果，直接选择\r\n              this.selectStudent(res.data[0])\r\n            }\r\n          } else if (!Array.isArray(res.data) && res.data.id) {\r\n            // 单个学生对象\r\n            this.selectStudent(res.data)\r\n          } else {\r\n            this.$message.warning('未找到匹配的学生')\r\n          }\r\n        } else {\r\n          this.$message.warning(res.msg || '未找到学生')\r\n        }\r\n      }).catch(err => {\r\n        console.error('搜索学生出错:', err)\r\n        this.$message.error('搜索失败')\r\n      })\r\n    },\r\n\r\n    // 高级搜索\r\n    handleAdvancedSearch() {\r\n      // 实现高级搜索逻辑\r\n      this.$message.info('高级搜索功能开发中...')\r\n    },\r\n\r\n    // 切换搜索类型\r\n    handleSearchTypeChange() {\r\n      this.searchInput = ''\r\n      this.$message.info(`已切换为按${this.searchType === 'studentId' ? '学号' :\r\n          this.searchType === 'name' ? '姓名' : '手机号'}搜索`)\r\n    },\r\n\r\n    // 显示学生列表\r\n    showStudentList() {\r\n      // 加载所有学生\r\n      this.$request.get('/user/selectPage', {\r\n        params: {\r\n          pageNum: 1,\r\n          pageSize: 100,\r\n          role: 'STUDENT'\r\n        }\r\n      }).then(res => {\r\n        if (res.code === '200' && res.data?.list) {\r\n          this.studentList = res.data.list\r\n          this.studentListVisible = true\r\n        } else {\r\n          this.$message.warning('获取学生列表失败')\r\n        }\r\n      })\r\n    },\r\n\r\n    // 重置搜索\r\n    resetSearch() {\r\n      this.searchInput = ''\r\n      this.currentStudent = {}\r\n      this.currentBorrowList = []\r\n      this.historyBorrowList = []\r\n      this.borrowStats = {\r\n        totalBorrowed: 0,\r\n        currentBorrowing: 0,\r\n        overdue: 0,\r\n        favorites: 0\r\n      }\r\n    },\r\n\r\n    // 选择学生\r\n    selectStudent(student) {\r\n      this.currentStudent = student\r\n      this.studentListVisible = false\r\n\r\n      // 加载该学生的借阅数据\r\n      this.loadBorrowData()\r\n    },\r\n\r\n    // 加载借阅数据\r\n    loadBorrowData() {\r\n      if (!this.currentStudent.id) {\r\n        this.$message.warning('请先选择学生')\r\n        return\r\n      }\r\n\r\n      this.loadCurrentBorrows()\r\n      this.loadHistoryBorrows()\r\n      this.calculateBorrowStats()\r\n    },\r\n\r\n    // 加载当前借阅\r\n    async loadCurrentBorrows() {\r\n      this.loadingCurrent = true\r\n      try {\r\n        const res = await this.$request.get(`/book/borrow/user/${this.currentStudent.id}`)\r\n        if (res.code === '200') {\r\n          // 过滤出未归还的记录\r\n          this.currentBorrowList = (res.data || []).filter(record => !record.returnTime)\r\n          this.selectedCurrentBorrows = []\r\n        } else {\r\n          this.$message.error(res.msg || '获取当前借阅失败')\r\n        }\r\n      } catch (error) {\r\n        console.error('获取当前借阅出错:', error)\r\n        this.$message.error('获取当前借阅失败')\r\n      } finally {\r\n        this.loadingCurrent = false\r\n      }\r\n    },\r\n\r\n    // 加载历史借阅记录\r\n    loadHistoryBorrows() {\r\n      this.loadingHistory = true\r\n\r\n      // 调用分页查询接口\r\n      bookApi.selectBorrowPage({\r\n        pageNum: this.historyPageNum,\r\n        pageSize: this.historyPageSize,\r\n        userId: this.currentStudent.id\r\n      }).then(res => {\r\n        this.loadingHistory = false\r\n        if (res.code === '200') {\r\n          this.historyBorrowList = res.data?.list || []\r\n          this.historyTotal = res.data?.total || 0\r\n        } else {\r\n          this.$message.error(res.msg || '获取历史记录失败')\r\n        }\r\n      }).catch(err => {\r\n        this.loadingHistory = false\r\n        console.error('获取历史记录出错:', err)\r\n      })\r\n    },\r\n\r\n    // 计算借阅统计\r\n    calculateBorrowStats() {\r\n      // 这里可以根据实际数据计算统计信息\r\n      this.borrowStats = {\r\n        totalBorrowed: this.historyTotal,\r\n        currentBorrowing: this.currentBorrowList.length,\r\n        overdue: this.currentBorrowList.filter(record => this.isOverdue(record)).length,\r\n        favorites: 0 // 需要额外的收藏接口\r\n      }\r\n    },\r\n\r\n    // 当前借阅多选\r\n    handleCurrentBorrowSelection(selection) {\r\n      this.selectedCurrentBorrows = selection\r\n    },\r\n\r\n    // 单本归还\r\n    handleSingleReturn(record) {\r\n      this.$confirm(`确认归还图书《${record.bookName}》吗？`, '办理归还', {\r\n        confirmButtonText: '确认归还',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        const adminId = this.currentAdmin.id\r\n        if (!adminId) {\r\n          this.$message.error('无法获取管理员信息')\r\n          return\r\n        }\r\n\r\n        bookApi.returnBook(record.id, adminId).then(res => {\r\n          if (res.code === '200') {\r\n            this.$message.success('归还成功')\r\n            this.loadBorrowData() // 重新加载数据\r\n          } else {\r\n            this.$message.error(res.msg || '归还失败')\r\n          }\r\n        })\r\n      }).catch(() => {})\r\n    },\r\n\r\n    // 批量归还\r\n    handleBatchReturn() {\r\n      if (this.selectedCurrentBorrows.length === 0) {\r\n        this.$message.warning('请选择要归还的图书')\r\n        return\r\n      }\r\n\r\n      const bookNames = this.selectedCurrentBorrows.map(item => item.bookName).join('、')\r\n      this.$confirm(`确认批量归还 ${this.selectedCurrentBorrows.length} 本图书吗？\\n\\n${bookNames}`, '批量归还', {\r\n        confirmButtonText: '确认归还',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        const adminId = this.currentAdmin.id\r\n        if (!adminId) {\r\n          this.$message.error('无法获取管理员信息')\r\n          return\r\n        }\r\n\r\n        // 批量处理\r\n        let successCount = 0\r\n        const processNext = (index) => {\r\n          if (index >= this.selectedCurrentBorrows.length) {\r\n            this.$message.success(`成功归还 ${successCount} 本图书`)\r\n            this.loadBorrowData()\r\n            return\r\n          }\r\n\r\n          const record = this.selectedCurrentBorrows[index]\r\n          bookApi.returnBook(record.id, adminId).then(res => {\r\n            if (res.code === '200') successCount++\r\n            processNext(index + 1)\r\n          }).catch(() => {\r\n            processNext(index + 1)\r\n          })\r\n        }\r\n\r\n        processNext(0)\r\n      }).catch(() => {})\r\n    },\r\n\r\n    // 续借\r\n    handleRenew(record) {\r\n      this.$confirm(`确认续借图书《${record.bookName}》吗？`, '办理续借', {\r\n        confirmButtonText: '确认续借',\r\n        cancelButtonText: '取消',\r\n        type: 'info'\r\n      }).then(() => {\r\n        // 这里需要调用续借接口，假设为/book/renew/{borrowId}\r\n        this.$request.post(`/book/renew/${record.id}`).then(res => {\r\n          if (res.code === '200') {\r\n            this.$message.success('续借成功')\r\n            record.renewed = true\r\n            // 更新应还时间\r\n            if (res.data && res.data.newDueTime) {\r\n              record.dueTime = res.data.newDueTime\r\n            }\r\n          } else {\r\n            this.$message.error(res.msg || '续借失败')\r\n          }\r\n        })\r\n      }).catch(() => {})\r\n    },\r\n\r\n    // 导出历史记录\r\n    exportHistory() {\r\n      this.$message.info('导出功能开发中...')\r\n      // 实际开发中可以调用导出接口\r\n    },\r\n\r\n    // 查看学生详情\r\n    viewStudentDetail() {\r\n      // 跳转到学生详情页面或显示详情对话框\r\n      this.$message.info('查看学生详情功能开发中...')\r\n    },\r\n\r\n    // 查看图书详情\r\n    viewBookDetail(bookId) {\r\n      // 跳转到图书详情页面\r\n      this.$message.info(`查看图书详情: ${bookId}`)\r\n    },\r\n\r\n    // 查看借阅记录详情\r\n    viewBorrowDetail(record) {\r\n      // 显示借阅记录详情\r\n      this.$alert(\r\n          `借阅记录详情：\\n\\n` +\r\n          `图书：${record.bookName}\\n` +\r\n          `作者：${record.bookAuthor}\\n` +\r\n          `ISBN：${record.bookIsbn}\\n` +\r\n          `借阅时间：${this.formatDate(record.borrowTime)}\\n` +\r\n          `应还时间：${this.formatDate(record.dueTime)}\\n` +\r\n          `归还时间：${this.formatDate(record.returnTime) || '尚未归还'}\\n` +\r\n          `操作员：${record.adminName || '系统'}`,\r\n          '借阅详情',\r\n          { confirmButtonText: '知道了' }\r\n      )\r\n    },\r\n\r\n    // 学生列表行点击\r\n    handleStudentSelect(row) {\r\n      this.selectStudent(row)\r\n    },\r\n\r\n    // 历史记录分页切换\r\n    handleHistoryPageChange(pageNum) {\r\n      this.historyPageNum = pageNum\r\n      this.loadHistoryBorrows()\r\n    },\r\n\r\n    // 历史记录每页条数切换\r\n    handleHistorySizeChange(pageSize) {\r\n      this.historyPageSize = pageSize\r\n      this.historyPageNum = 1\r\n      this.loadHistoryBorrows()\r\n    },\r\n\r\n    // 工具方法：格式化日期\r\n    formatDate(dateStr) {\r\n      if (!dateStr) return '--'\r\n      try {\r\n        const date = new Date(dateStr)\r\n        return date.toLocaleDateString('zh-CN', {\r\n          year: 'numeric',\r\n          month: '2-digit',\r\n          day: '2-digit'\r\n        }).replace(/\\//g, '-')\r\n      } catch (e) {\r\n        return dateStr\r\n      }\r\n    },\r\n\r\n    // 判断是否超期\r\n    isOverdue(record) {\r\n      if (!record.dueTime) return false\r\n\r\n      const dueDate = new Date(record.dueTime)\r\n      const now = new Date()\r\n      return now > dueDate\r\n    },\r\n\r\n    // 计算超期天数\r\n    calculateOverdueDays(record) {\r\n      if (!this.isOverdue(record)) return 0\r\n\r\n      const dueDate = new Date(record.dueTime)\r\n      const now = new Date()\r\n      const diffTime = now - dueDate\r\n      return Math.ceil(diffTime / (1000 * 60 * 60 * 24))\r\n    },\r\n\r\n    // 计算剩余天数\r\n    calculateRemainingDays(record) {\r\n      if (!record.dueTime || this.isOverdue(record)) return 0\r\n\r\n      const dueDate = new Date(record.dueTime)\r\n      const now = new Date()\r\n      const diffTime = dueDate - now\r\n      return Math.ceil(diffTime / (1000 * 60 * 60 * 24))\r\n    },\r\n\r\n    // 获取剩余天数标签类型\r\n    getRemainingDaysTagType(record) {\r\n      const days = this.calculateRemainingDays(record)\r\n      if (days <= 0) return 'danger'\r\n      if (days <= 3) return 'warning'\r\n      return 'success'\r\n    },\r\n\r\n    // 计算借阅时长\r\n    calculateBorrowDuration(record) {\r\n      if (!record.borrowTime) return '--'\r\n\r\n      const borrowDate = new Date(record.borrowTime)\r\n      const returnDate = record.returnTime ? new Date(record.returnTime) : new Date()\r\n      const diffTime = returnDate - borrowDate\r\n      const days = Math.floor(diffTime / (1000 * 60 * 60 * 24))\r\n\r\n      return days > 0 ? `${days}天` : '当天归还'\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.search-container {\r\n  padding: 10px;\r\n}\r\n\r\n.student-info {\r\n  padding: 10px;\r\n}\r\n\r\n.info-item {\r\n  margin-bottom: 10px;\r\n  min-width: 150px;\r\n}\r\n\r\n.info-label {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.info-value {\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n  color: #303133;\r\n}\r\n\r\n/* 表格行悬停效果 */\r\n.el-table >>> tbody tr:hover {\r\n  cursor: pointer;\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n/* 卡片标题样式 */\r\n.el-card__header {\r\n  background-color: #fafafa;\r\n  border-bottom: 1px solid #ebeef5;\r\n}\r\n\r\n/* 响应式调整 */\r\n@media (max-width: 768px) {\r\n  .search-container > div {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .info-item {\r\n    min-width: 100%;\r\n  }\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}